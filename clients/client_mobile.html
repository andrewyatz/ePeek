<!DOCTYPE html>
<meta charset="utf-8">
<html>
  <head>
    <title>e!Peek</title>

    <!-- Remote JQuery -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <!-- Local JQuery-URL-Parser -->
    <script src="lib/jQuery-URL-Parser/purl.js"></script>

    <!-- Remote D3.js -->
    <script src="http://d3js.org/d3.v3.min.js"></script>

    <!-- Local jqTouch -->
    <style type="text/css" media="screen">@import "lib/jqtouch-1.0-b4-rc/themes/css/jqtouch.css";</style>
    <script src="lib/jqtouch-1.0-b4-rc/src/jqtouch.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/jqtouch-1.0-b4-rc/src/jqtouch-jquery.min.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript">
      var jQT = $.jQTouch({
      statusBar: 'black'
      });
</script>
  </head>

  <body>
    <div id="Options">
      <div class="toolbar">
    	<h1>Options</h1>
      </div>
      <ul class="edgetoedge">
    	<li class="arrow"><a href="#search">Search</a></li>
    	<li class="arrow"><a href="#ensGenes">Ensembl Genes</a></li>
    	<li class="arrow"><a href="#orthologues">Orthologues</a></li>
    	<li class="arrow"><a href="#browser">Browser</a></li>
      </ul>
    </div>

    <div id="search">
      <div class="toolbar">
	<h1>Search</h1>
	<a class="button back" href="#">Back</a>
      </div>
      <form method="get"> <!-- Needed?? -->
	<ul>
	  <li><input type="text" placeholder="BRCA2" name="location" id="ePeek_loc"  autocapitalize="off" autocorrect="off" autocomplete="off" /></li>
	  <li><input type="submit" class="submit" name="action" value="Jump!" onclick="var val=$('#ePeek_loc').val(); window.location.href='test1.html?loc=' + val + '#browser'"/></li>
	</ul>
      </form>
      <ul class="edgetoedge">
	<li>Examples:</li>
	<li>ENSG00000139618</li>
	<li>SNORD73</li>
	<li>human:5:1533225-1555555</li>
      </ul>
    </div>

    <div id="ensGenes">
      <div class="toolbar">
	<h1>Ensembl Genes</h1>
	<a class="button back" href="#">Back</a>
      </div>
      <ul class="edgetoedge">
	<li><div id="ePeek_ext_ensGenes_select"></div></li>
      </ul>
    </div>
      
    <div id="orthologues">
      <div class="toolbar">
	<h1>Orthologues</h1>
	<a class="button back" href="#">Back</a>
      </div>
      <ul class="edgetoedge">
	<li><div id="ePeek_ext_orth_select"></div></li>
      </ul>
    </div>

    <div id="browser">
      <div class="toolbar">
    	<h1>e!Peek</h1>
    	<a class="button back" href="#">Options</a>
      </div>
      <ul class="edgetoedge">
    	<li><div id="GenomeBrowser"></div></li>
      </ul>
    </div>

<!--     <link rel="stylesheet" href="http://www.ebi.ac.uk/~mp/tests/minimalGenomeBrowser.css" type="text/css" /> -->
<!--     <script src="http://www.ebi.ac.uk/~mp/tests/minimalGenomeBrowser.js"></script> -->
    <link rel="stylesheet" href="../lib/minimalGenomeBrowser.css" type="text/css" />
    <script src="../lib/minimalGenomeBrowser.js"></script>

    <script>
      (function() {
      var gB = genomeBrowser()
          .show_options(false)
          .show_title(false)
          .orthologues_div_id("ePeek_ext_orth_select")
          .ensGenes_div_id("ePeek_ext_ensGenes_select");

      var url = $.url();
      if (url.param("species") !== undefined) {
        gB = gB.species(url.param("species")); // Is it needed the new gB?
      }

      if (url.param("chr") !== undefined) {
        var chr  = url.param("chr");
        var from = url.param("from");
        var to   = url.param("to");
        gB = gB.chr(chr).from(from).to(to);
      }

      if (url.param("gene") !== undefined) {
        gB = gB.gene(url.param("gene"));
      }

      if (url.param("loc") !== undefined) {
        var loc = url.param("loc");
        if (gB.isLocation(loc)) {
          gB.parseLocation(loc);
        } else {
          gB.gene(loc);
        }
      }

      gB(document.getElementById("GenomeBrowser"));
      })();
    </script>

  </body>
  
</html>

